<?php
    $isOpenTimeValid = function($data, $day)
    {
        if (isset($data['open'][$day]) && isset($data['close'][$day])) {
            return true;
        } else {
            return false;
        }
    };
?>

<div class="popup-content">
    <?php $data = $this->get('data'); ?>
    
    <?php if($data['imagePath']): ?>
        <img class="thumb-img" src="/<?php $data['imagePath'] ?>">
    <?php endif; ?>
    <h2>
        <?php $data['name']?>
    </h2>
    <div class="isOpen">
        <?php if(isset($data['opened'])){
                switch ($data['opened']) {
                    case 'open':
                        echo 'Jelenleg nyitva!';
                        break;
                    case 'close':
                        echo 'Jelenleg zárva';
                        break;
                    case '1hour':
                        echo 'Egy órán belül zárva.';
                        break;
                    default:
                        echo 'Nincs nyitvatartási adat.';
                }} else {
                     echo 'Nincs nyitvatartási adat.';
                }
            ?>
    </div>
    <div class="open-time">
        <h3>
            Nyitvatartás:
        </h3>
        <div>
            <div class="" style="display: inline-block; float: left;">
                <div>Hétfő</div>
                <div>Kedd</div>
                <div>Szerda</div>
                <div>Csütörtök</div>
                <div>Péntek</div>
                <div>Szombat</div>
                <div>Vasárnap</div>
            </div>
            <div style="display: inline-block; float: left; text-align: center;">
                <?php if ($isOpenTimeValid($data, 'monday')) {?>
                <div><?php $data['open']['monday'] ?> - <?php $data['close']['monday'] ?></div>
                <?php } else { ?>
                <div>Nincs adat</div>
                <?php } ?>
                <?php if ($isOpenTimeValid($data, 'tuesday')) {?>
                <div><?php $data['open']['tuesday'] ?> - <?php $data['close']['tuesday'] ?></div>
                <?php } else { ?>
                <div>Nincs adat</div>
                <?php } ?>
                <?php if ($isOpenTimeValid($data, 'wednesday')) {?>
                <div><?php $data['open']['wednesday'] ?> - <?php $data['close']['wednesday'] ?></div>
                <?php } else { ?>
                <div>Nincs adat</div>
                <?php } ?>
                <?php if ($isOpenTimeValid($data, 'thursday')) {?>
                <div><?php $data['open']['thursday'] ?> - <?php $data['close']['thursday'] ?></div>
                <?php } else { ?>
                <div>Nincs adat</div>
                <?php } ?>
                <?php if ($isOpenTimeValid($data, 'friday')) {?>
                <div><?php $data['open']['friday'] ?> - <?php $data['close']['friday'] ?></div>
                <?php } else { ?>
                <div>Nincs adat</div>
                <?php } ?>
                <?php if ($isOpenTimeValid($data, 'saturday')) {?>
                <div><?php $data['open']['saturday'] ?> - <?php $data['close']['saturday'] ?></div>
                <?php } else { ?>
                <div>Nincs adat</div>
                <?php } ?>
                <?php if ($isOpenTimeValid($data, 'sunday')) {?>
                <div><?php $data['open']['sunday'] ?> - <?php $data['close']['sunday'] ?></div>
                <?php } else { ?>
                <div>Nincs adat</div>
                <?php } ?>
            </div>
        </div> 
    </div>
    <div class="pub-attributes">
        <?php if (isset($$data['address'])) { ?>
        <p id="address">
            Cím: <?php $data['address'] ?>
        </p>
        <?php } ?>
        <?php if($data['email']): ?>
            <p id="email">
                E-mail cím: <?php $data['email'] ?>
            </p>
        <?php endif; ?>
        <?php if($data['phone']): ?>
            <p id="phone">
                Telefonszám: <?php $data['phone'] ?>
            </p>
        <?php endif; ?>
        <?php if($data['comment']): ?>
            <p id="comment">
                <?php $data['comment']?>
            </p>
        <?php endif; ?>
    </div>
      
    <input type="button" class="submit-button" style="display: inline; margin: 10px 5px 10px 5px;" onClick="createRoute()" value="Útvonal ide!">

    <script>
        function createRoute(){
            calcRoute({lat: Number('<?php $data['latitude']?>'), lng:Number('<?php $data['longitude']?>')});
        }
    </script>
</div>